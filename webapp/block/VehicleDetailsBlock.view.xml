<mvc:View 
	xmlns:html="http://www.w3.org/1999/xhtml" 
	xmlns:mvc="sap.ui.core.mvc" 
	xmlns="sap.m" 
	xmlns:l="sap.ui.layout" 
	xmlns:f="sap.ui.layout.form"
	xmlns:core="sap.ui.core" 
	controllerName="hnd.dpe.warranty.prior_work_approval.block.VehicleDetailsBlockController"
>
	<VBox class="sapUiSmallMargin">
		<f:SimpleForm 
			objectBindings="{PWA>/}"
			editable="true"
			layout="ResponsiveGridLayout"
			labelSpanL="4"
			labelSpanM="12"
			emptySpanL="0"
			emptySpanM="0"
			columnsL="2"
			columnsM="2"
			class="editableForm"
			adjustLabelSpan="false"
		>
			<f:content>
				<core:Title 
					text="{= ${PWA>/ObjectType} === 'VELO' ? 'Vehicle Details':'Product Details'}"
				/>
				<Label 
					id="ExternalObjectNumber_label" 
					text="{= ${PWA>/ObjectType} === 'VELO' ? 'VIN':'VIN/Serial Number'}"
					required="true" 
					labelFor="ExternalObjectNumber"
				/>
				<l:VerticalLayout>
					<Input 
						id="ExternalObjectNumber_VELO" 
						value="{PWA>ExternalObjectNumber/value}"
						description="{PWA>ExternalObjectDescription}"
						fieldWidth="40%"
						required="true"
						editable="{PWA>CanEdit}"
						visible="{= ${PWA>/ObjectType} === 'VELO'}"
						showSuggestion="true"
						suggest="onExternalObjectNumberSuggest"
						showTableSuggestionValueHelp="false"
						suggestionItemSelected="onExternalObjectNumberVELOSelected"
						maxLength="35"
						change="onExternalObjectNumberChanged"
						suggestionRows="{/ZWTY_C_VIN}"
						maxSuggestionWidth="500px"
						valueState="{= ${PWA>ExternalObjectNumber/ruleResult/valid} ? 'None':'Error'}"
					>
						<suggestionColumns>
							<Column>
								<Text text="VIN" />
							</Column>
							<Column>
								<Text text="Vehicle Type" />
							</Column>
						</suggestionColumns>
						<suggestionRows>
							<ColumnListItem>
								<cells>
									<Label text="{VIN}" />
									<Label text="{Description}" />
								</cells>
							</ColumnListItem>
						</suggestionRows>									
					</Input>
					<Input 
						id="ExternalObjectNumber_SERN" 
						value="{PWA>ExternalObjectNumber/value}"
						description="{PWA>ExternalObjectDescription}"
						fieldWidth="40%"
						required="true"
						editable="{PWA>CanEdit}"
						visible="{= ${PWA>/ObjectType} !== 'VELO'}"
						showSuggestion="true"
						suggest="onExternalObjectNumberSuggest"
						showTableSuggestionValueHelp="false"
						suggestionItemSelected="onExternalObjectNumberSERNSelected"
						maxLength="18"
						change="onExternalObjectNumberChanged"
						suggestionRows="{/Zwty_c_serial_number}"
						maxSuggestionWidth="700px"
						valueState="{= ${PWA>ExternalObjectNumber/ruleResult/valid} ? 'None':'Error'}"
					>
						<suggestionColumns>
							<Column>
								<Text text="Serial Number" />
							</Column>
							<Column>
								<Text text="Description" />
							</Column>
						</suggestionColumns>
						<suggestionRows>
							<ColumnListItem>
								<cells>
									<Label text="{SerialNumber}" />
									<Label text="{Equipment_Text}" />
								</cells>
							</ColumnListItem>
						</suggestionRows>									
					</Input>
				</l:VerticalLayout>	

				<Label text="Engine Number" labelFor="engineNumber"/>
				<Input  
					id="engineNumber" 
					value="{PWA>EngineNumber}" 
					editable="{PWA>CanEdit}" 
					maxLength="10"
				/>
				<Label 
					id="ModelCode_label" 
					text="Model Code" 
					labelFor="ModelCode"
					visible="{= ${PWA>/ObjectType} !== 'VELO'}"
				/>
				<Input  
					id="ModelCode" 
					value="{PWA>ExternalObjectModelCode}" 
					editable="false"
					visible="{= ${PWA>/ObjectType} !== 'VELO'}"
				/>
				
				<core:Title text="Dealer" />
				<Label text="Dealer Contact" labelFor="dealerContact"/>
				<Input 
					id="dealerContact" 
					value="{PWA>DealerContact}"
					maxLength="20"
					editable="{PWA>CanEdit}"
					showSuggestion="true"
					suggestionItems="{/EmployeeSet}">
					<suggestionItems>
						<core:ListItem key="{EmployeeNumber}" text="{FirstName} {LastName}" />
					</suggestionItems>										
				</Input>
		
				<core:Title text="Main Causal Part" />
				<Label id="MCPN_label" text="MCPN" labelFor="MCPN" required="true"/>
		        <Input 
		          id="MCPN" 
		          required="true"
		          value="{PWA>/MCPN/value}"  
		          description="{PWA>MCPNDescription}"
		          change="onMCPNChanged"
		          editable="{PWA>/CanEdit}"
		          showValueHelp="true"
		          showSuggestion="true"
		          filterSuggests="false"
		          suggest="onMCPNSuggest"
		          suggestionItemSelected="onMCPNSelected"
		          suggestionRows="{/ZDPE_C_MATERIALS}"
		          valueHelpRequest="onSelectMCPN"
		          maxLength="40"
		          valueState="{= ${PWA>MCPN/ruleResult/valid} ? 'None':'Error'}"
		        >
					<suggestionColumns>
		            <Column>
		              <Text text="Part No." />
		            </Column>
		            <Column>
		              <Text text="Description" />
		            </Column>
		          </suggestionColumns>
		          <suggestionRows>
		            <ColumnListItem>
		              <cells>
		                <Label text="{materialNo}" />
		                <Label text="{description}" />
		              </cells>
		            </ColumnListItem>
		          </suggestionRows>  
	        	</Input>
	        	
	        	<core:Title text="" />
				<core:Title text="Failure Details" />
				<Label id="DateOfFailure_label" text="Date of Failure" labelFor="dateOfFailure" required="true"/>
				<DatePicker 
					id="DateOfFailure" 
					displayFormat="dd/MM/yyyy"
					dateValue="{PWA>DateOfFailure/value}" 
					editable="{PWA>CanEdit}"
					change="onDateOfFailureChanged"
					valueState="{= ${PWA>DateOfFailure/ruleResult/valid} ? 'None':'Error'}"
				/>
				
				<core:Title text="" />
				<Label text="Failure KM/Hrs" labelFor="failureKM"/>
				<Input id="failureKM" value="{PWA>FailureMeasure}" editable="{PWA>CanEdit}"/>
			</f:content>	
		</f:SimpleForm>
	</VBox>
</mvc:View>